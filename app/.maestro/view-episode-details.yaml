appId: com.vfilby.migrainetracker
---
# E2E Test: View Episode Details
# Tests viewing comprehensive episode details including timeline, notes, and stats

- launchApp
- assertVisible: "Dashboard"

# Create a test episode with data if needed
- tapOn: "Start New Episode"
- tapOn: "Save Episode"
- assertVisible: "Dashboard"

# Navigate to Episodes tab to see all episodes
- tapOn:
    text: "Episodes"
- assertVisible: "Episode History"

# Tap on the first episode to view details
- tapOn:
    index: 0
    id: ".*episode.*"
- assertVisible: "Episode Detail"

# Verify key episode detail sections exist
- assertVisible: "Pain Intensity"
- assertVisible: "Duration"

# Verify timeline section
- assertVisible: "Timeline"

# Verify we can see episode stats
# Should show peak intensity, average intensity, or similar stats

# Scroll down to see more details
- scroll

# Verify symptoms/triggers section exists (if episode has them)
# These might be empty for a fresh episode

# Add a note to the episode
- tapOn: "Add Note"
- assertVisible: "Add Note"
- tapOn: "Note"
- inputText: "Testing episode notes feature"
- tapOn: "Save"

# Verify note appears in timeline
- assertVisible: "Testing episode notes feature"

# Verify episode metadata
- assertVisible: "Start Time"

# If episode is ongoing, verify we can end it
- tapOn: "End Episode"
- assertVisible: "Ended"

# Verify end time is now displayed
- assertVisible: "End Time"
- assertVisible: "Duration"

# Go back to episodes list
- back
- assertVisible: "Episode History"

# Verify episode appears in the list
- assertVisible:
    index: 0
    id: ".*episode.*"

# Return to dashboard
- tapOn:
    text: "Dashboard"
- assertVisible: "Dashboard"
